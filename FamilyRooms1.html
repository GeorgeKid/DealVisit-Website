<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IdealVisit_FamilyRoom</title>
  <link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
  <link rel="stylesheet" href="css/style.css"> <!-- Gem style -->
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,700' rel='stylesheet' type='text/css'>
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap-datetimepicker.min.css" rel="stylesheet"> 
  <link href="css/flexslider.css" rel="stylesheet"> 
  <link href="css/templatemo-style.css" rel="stylesheet">
</head>



<body class="tm-gray-bg">

  <header role="banner">
    <div id="cd-logo"><a href="Home.html"><img src="img/icon_B.png" alt="Logo"></a></div>

    <nav class="main-nav">
      <ul>
        <li><a class="cd-signin" href="#0">Sign in</a></li>
        <li><a class="cd-signup" href="#0">Sign up</a></li>
        <li><a class="cd-logout" href="#0">Log out</a></li>
        <li><a class="cd-user" href="#0"></a></li>
      </ul>
    </nav>
  </header>

  <section class="container tm-home-section-1" id="more">

    <div class="section-margin-top">
      <div class="row">       
        <div class="tm-section-header">
          <div class="col-lg-3 col-md-3 col-sm-3"><hr></div>
          <div class="col-lg-6 col-md-6 col-sm-6"><h2 class="tm-section-title" style="color:black">Family Room</h2></div>
          <div class="col-lg-3 col-md-3 col-sm-3"><hr></div>  
        </div>
      </div>
      <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="tm-tours-box-1">
            <img alt="image" class="img-responsive" id="img5">
            <div class="tm-tours-box-1-info">
              <div class="tm-tours-box-1-info-left">
                <p class="text-uppercase margin-bottom-20" id="hotel5"></p>  
                <p class="gray-text" id="street5"></p>
                <p class="gray-text" id="city5"></p>
              </div>
              <div class="tm-tours-box-1-info-right">
                <p class="gray-text tours-1-description" id="des5"></p>  
              </div>              
            </div>
            <div class="tm-tours-box-1-link">
              <div class="tm-tours-box-1-link-left">
                Duration: 2 days
              </div>
              <a href="#" class="tm-tours-box-1-link-right" id="price5"></a>              
            </div>
          </div>          
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="tm-tours-box-1">
            <img alt="image" class="img-responsive" id="img6">
            <div class="tm-tours-box-1-info">
              <div class="tm-tours-box-1-info-left">
                <p class="text-uppercase margin-bottom-20" id="hotel6"></p>  
                <p class="gray-text" id="street6"></p>
                <p class="gray-text" id="city6"></p>
              </div>
              <div class="tm-tours-box-1-info-right">
                <p class="gray-text tours-1-description" id="des6"></p>  
              </div>              
            </div>
            <div class="tm-tours-box-1-link">
              <div class="tm-tours-box-1-link-left">
                Duration: 3 days
              </div>
              <a href="#" class="tm-tours-box-1-link-right" id="price6"></a>              
            </div>
          </div>          
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="tm-tours-box-1">
            <img alt="image" class="img-responsive" id="img7">
            <div class="tm-tours-box-1-info">
              <div class="tm-tours-box-1-info-left">
                <p class="text-uppercase margin-bottom-20" id="hotel7"></p>
                <p class="gray-text" id="street7"></p>
                <p class="gray-text" id="city7"></p>
              </div>
              <div class="tm-tours-box-1-info-right">
                <p class="gray-text tours-1-description" id="des7"></p>  
              </div>              
            </div>
            <div class="tm-tours-box-1-link">
              <div class="tm-tours-box-1-link-left">
                Duration: 9 days
              </div>
              <a href="#" class="tm-tours-box-1-link-right" id="price7"></a>              
            </div>
          </div>          
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="tm-tours-box-1">
            <img alt="image" class="img-responsive" id="img8">
            <div class="tm-tours-box-1-info">
              <div class="tm-tours-box-1-info-left">
                <p class="text-uppercase margin-bottom-20" id="hotel8"></p>  
                <p class="gray-text" id="street8"></p>
                <p class="gray-text" id="city8"></p>
              </div>
              <div class="tm-tours-box-1-info-right">
                <p class="gray-text tours-1-description" id="des8"></p>  
              </div>              
            </div>
            <div class="tm-tours-box-1-link">
              <div class="tm-tours-box-1-link-left">
                Duration: 6 days
              </div>
              <a href="#" class="tm-tours-box-1-link-right" id="price8"></a>              
            </div>
          </div>          
        </div>
      </div>    
    </div>
  </section>    

 <script
   src="https://code.jquery.com/jquery-3.1.1.min.js"
   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
   crossorigin="anonymous"></script>   
  <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
  <script src="js/jquery.flexslider-min.js"></script> 
  <script src="js/bootstrap.min.js"></script> 
  <script src="js/templatemo-script.js"></script> 
  <script src="js/main.js"></script> 
  <script src="js/modernizr.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
  <script>
  // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDdkve5V7CP9ZmKlc5TzLR6ZQSic-FIgNg",
      authDomain: "inf551-985c0.firebaseapp.com",
      databaseURL: "https://inf551-985c0.firebaseio.com",
      projectId: "inf551-985c0",
      storageBucket: "inf551-985c0.appspot.com",
      messagingSenderId: "511714336500"
    };

    firebase.initializeApp(config);

    var user;
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        // User is signed in.
        console.log(user.uid+" @personal_info");
        $(".cd-logout").addClass('is-visible');
        $(".cd-user").addClass('is-visible');           
        document.getElementsByClassName('cd-signin')[0].style.visibility = 'hidden';
        document.getElementsByClassName('cd-signup')[0].style.visibility = 'hidden';  

      } else {
        // No user is signed in.
        console.log('you are not logged in!');
        $(".cd-logout").removeClass('is-visible');
        $(".cd-user").removeClass('is-visible');    
        document.getElementsByClassName('cd-signin')[0].style.visibility = 'visible';
        document.getElementsByClassName('cd-signup')[0].style.visibility = 'visible';        
      }
    });

 
    $('.cd-logout').on('click', function(event){
      firebase.auth().signOut();

      console.log('try to log out');
      firebase.auth().onAuthStateChanged(function(firebaseUser){
        if (firebaseUser){
          console.log(firebaseUser+'not logged out');
        }else {
          console.log('logged out');
          $(".cd-logout").removeClass('is-visible');
          $(".cd-user").removeClass('is-visible');          
        document.getElementsByClassName('cd-signin')[0].style.visibility = 'visible';
        document.getElementsByClassName('cd-signup')[0].style.visibility = 'visible';  
        }
      });
    });
    //go to personal Info page
    $('.cd-user').on('click', function(event){
      firebase.auth().onAuthStateChanged(function(firebaseUser){
        if (firebaseUser){
          window.location = "personal.html";
        }
        else {
          console.log('not logged in');
        }
      });
    });

    var ID;
    //fetch data
    var rootRef = firebase.database().ref('/familyRooms/');
    rootRef.on("value", function(snapshot){
      for(i = 5; i<=8; i++){

        ID = i.toString();
        document.getElementById("img"+ID).src = snapshot.child(ID+'/url').val(); 
        document.getElementById("hotel"+ID).innerHTML = snapshot.child(ID+'/name').val();      
        document.getElementById("des"+ID).innerHTML = snapshot.child(ID+'/description').val();          
        document.getElementById("street"+ID).innerHTML = snapshot.child(ID+'/address/street').val();
        document.getElementById("city"+ID).innerHTML = snapshot.child(ID+'/address/city').val();
        document.getElementById("price"+ID).innerHTML = snapshot.child(ID+'/price').val();
      }
    });



  </script>
 
 </body>

 </html>
